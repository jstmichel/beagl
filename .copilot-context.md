# Copilot Context for Beagl

## Application Goal
Beagl is designed for animal centers as a centralized CRM. It enables employees to manage animal and owner data, and provides a self-service portal for animal owners to register their animals and pay annual fees. The main objective is to unify and centralize data that is currently spread across multiple systems.

## Project Overview
Beagl is a .NET solution using ASP.NET Core and Blazor for web development. It is organized into domain, infrastructure, and web application layers, with corresponding test projects.

## Technologies
- .NET 8 (C#, default language version)
- ASP.NET Core
- Blazor
- Entity Framework Core
- Docker (for deployment)
- Identity with EF Core for User and Roles

## Solution Structure
- `beagl.sln`: Solution file
- `src/Beagl.Domain/`: Domain models and business logic
- `src/Beagl.Infrastructure/`: Data access, EF Core migrations, database initialization
- `src/Beagl.WebApp/`: Blazor web application, configuration, resources, components
- `tests/`: Unit and integration tests for each layer

## Main Features
- Domain entities (e.g., roles)
- Infrastructure for database access and migrations
- User authentication and role management
- Animal registration and tracking
- Owner portal for self-service (animal registration, fee payment)
- Employee management (profiles, details)
- Animal adoption workflow
- Fee payment processing (annual fees)
- Centralized data management for animals and owners
- Reporting tools for operations and finance

## Main Workflows & Features
- Employee profile and details management
- Animal registration
- Animal adoption
- Fee payment (annual fees)
- Data management (centralized records)
- Reporting (for operations and finance)

## Coding Guidelines
- All public methods must include XML documentation comments describing their purpose, parameters, and return values.
- **Naming Conventions:** Use PascalCase for class, method, and property names. Use camelCase for local variables and parameters. Prefix interfaces with 'I' (e.g., `IAnimalRepository`). Use meaningful, descriptive names for all identifiers.
- **Code Formatting:** Follow the default .NET/C# formatting conventions. Use 4 spaces for indentation. Place opening braces on a new line. Remove unused code and imports. Keep lines under 120 characters where possible.
- **Error Handling:** Use exceptions for error conditions. Catch exceptions only when you can handle them meaningfully. Avoid swallowing exceptions. Use custom exception types where appropriate.
- **Logging Practices:** Use the built-in ASP.NET Core logging framework (`ILogger<T>`). Log errors, warnings, and important events. Avoid logging sensitive information. Use structured logging for complex data.
- **Other Standards:** Write unit and integration tests for all business logic. Avoid magic numbers and strings; use constants or enums. Document public APIs and endpoints. Ensure code is self-explanatory and maintainable.

## Build & Run
- Build: `dotnet build beagl.sln`
- Run: `dotnet watch run --project src/Beagl.WebApp/Beagl.WebApp.csproj`
- Publish: `dotnet publish src/Beagl.WebApp/Beagl.WebApp.csproj`

## Testing
- Test projects in `tests/` folder
- Run tests: `dotnet test` (from solution root)

## Coding Conventions
- Clean Code principles (Robert C. Martin)
- Clean Architecture (layered separation, dependency inversion)
- C# best practices
- Layered architecture: Domain, Infrastructure, WebApp
- Tests mirror structure of main projects

## Design Patterns & Practices
- Use design patterns recommended by Clean Code and Clean Architecture (Robert C. Martin)
- Common patterns: Repository, Dependency Injection, Factory, Singleton, Strategy, Adapter, Observer, Mediator, Command, CQRS
- Favor SOLID principles and separation of concerns
- Emphasize testability and maintainability

## Notes
- Dockerfile present for web app deployment
- EF Core migrations in `src/Beagl.Infrastructure/Migrations/`
- Configuration files in `src/Beagl.WebApp/`

## User Roles
- Administrator
- Animal Control
- Employee
- Security (Police)
- Development (Developers)
- Finance
- Board Member

## Data Sources
- Currently uses SQLite for development and testing
- Planned migration to PostgreSQL for production

---
Update this file with any new features, conventions, or important context as the project evolves.
